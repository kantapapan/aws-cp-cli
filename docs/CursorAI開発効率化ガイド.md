# Cursor AI開発効率化ガイド: Scratchpad + Memories システム

## 目次

1. [はじめに](#はじめに)
2. [システム概要](#システム概要)
3. [導入の判断基準](#導入の判断基準)
4. [システム構成](#システム構成)
5. [導入手順](#導入手順)
6. [使用方法](#使用方法)
7. [運用ベストプラクティス](#運用ベストプラクティス)
8. [よくある質問](#よくある質問)
9. [参考資料](#参考資料)

<a id="はじめに"></a>
## 1. はじめに

Cursorは開発効率を大きく向上させるAI搭載のコードエディタですが、プロジェクトが大きくなるにつれて以下の課題が生じがちです：

- **コンテキスト長の限界**: AIモデルのコンテキストウィンドウの制限により過去の会話内容が失われる
- **セッション分断**: ウィンドウを閉じたり、モデル更新があったりするとコンテキストが失われる
- **プロジェクト知識の分散**: チームメンバー間でAIとの会話内容が共有されない

これらの課題を解決するために、「Scratchpad + Memories」システムを導入します。このシステムは、**タスク計画の構造化**と**プロジェクト知識の永続化**を実現し、AIとの協業をさらに効率化します。

<a id="システム概要"></a>
## 2. システム概要

「Scratchpad + Memories」システムは「計画 → 実行 → 振り返り → 学習」のサイクルを確立し、AIとの共同作業を最適化するフレームワークです。

### 主要コンセプト

| 要素 | 役割 | 更新頻度 |
|-----|-----|---------|
| **Scratchpad** | 現在のタスク計画を記録。AIが計画を立て、人間がレビュー・承認する場所 | タスクごとにリセット |
| **Memories** | プロジェクト全体の知見を蓄積。次のタスクで参照できるよう長期記憶を保存 | 継続的に追記 |
| **管理ルール** | Scratchpadとmemoriesの更新・参照方法を標準化するルール | 必要に応じて調整 |

### システムの利点

- **一貫性のある計画**: 標準化されたアプローチでタスク計画を立てられる
- **知識の共有**: チーム全体でプロジェクトの知見を蓄積・共有できる
- **コンテキスト拡張**: AIのコンテキスト制限を超えた長期記憶が可能になる
- **効率化**: 同じ説明を繰り返す必要がなくなり、開発速度が向上する

<a id="導入の判断基準"></a>
## 3. 導入の判断基準

以下のチェックリストで3つ以上当てはまる場合、このシステムの導入をお勧めします：

- [ ] プロジェクト規模が複数万行のコード、または複数のサービスに及ぶ
- [ ] AIとの対話で「以前の文脈を忘れている」と感じることが多い
- [ ] チームメンバー間で開発知識の共有に課題を感じている
- [ ] 同じ説明を何度もAIに繰り返している
- [ ] プロジェクト固有の規約や制約が多く、それらを毎回AIに伝える必要がある

<a id="システム構成"></a>
## 4. システム構成

システムは以下の4つのファイルで構成されています：

### ファイル構造

```
プロジェクトルート/
├── .cursor/
│   ├── rules/
│   │   ├── scratchpad-management.mdc  # スクラッチパッド管理ルール
│   │   └── memories-management.mdc    # メモリーズ管理ルール
│   ├── scratchpad.md                  # タスク計画書
│   └── memories.md                    # プロジェクト知識の長期保存
```

### ファイルの役割

1. **scratchpad-management.mdc**:
   - スクラッチパッドの更新・管理方法を定義
   - タスク計画のテンプレートを提供
   - AIがスクラッチパッドを更新する際の指針

2. **memories-management.mdc**:
   - メモリーズファイルの更新・参照方法を定義
   - 知見を記録する際のフォーマットを標準化
   - タグ付けやカテゴリ分けのルールを提供

3. **scratchpad.md**:
   - 現在取り組んでいるタスクの計画を記録
   - 実装ステップや注意点を詳細に記述
   - タスク完了後にリセットまたは更新

4. **memories.md**:
   - プロジェクト全体を通じて得られた知見を記録
   - タグやタイムスタンプで検索しやすく整理
   - 継続的に更新され、長期的な参照用として機能

<a id="導入手順"></a>
## 5. 導入手順

### ステップ1: ファイルの設置

1. `.cursor/rules/` ディレクトリを作成（存在しない場合）
2. 4つの基本ファイルを作成：
   - `.cursor/rules/scratchpad-management.mdc`
   - `.cursor/rules/memories-management.mdc`
   - `.cursor/scratchpad.md`
   - `.cursor/memories.md`

### ステップ2: 初期設定

1. 各ファイルの内容を設定（サンプルテンプレートを使用）
2. プロジェクト固有の情報で内容をカスタマイズ
3. チームに導入意図と使用方法を説明

### ステップ3: 試行導入

1. 小規模なタスク（バグ修正など）で試行
2. 「計画→実行→振り返り」のサイクルを2〜3回実施
3. チームからのフィードバックを収集し、必要に応じてプロセスを調整

<a id="使用方法"></a>
## 6. 使用方法

### タスク計画の作成

1. Composerを起動し、以下のコマンドを実行：
   ```
   @scratchpad-management.mdc に従い、以下のタスクをスクラッチパッドにまとめて。
   過去知識として @memories.md も参照して。
   [タスクの説明]
   ```

2. AIがスクラッチパッドに計画を書き込む
3. 計画をレビューし、必要に応じて修正
4. 計画に基づいてタスクを実装

### 知見の記録

1. タスク完了後、同じセッションで以下のコマンドを実行：
   ```
   今回得た知見を @memories-management.mdc に従って整理し、
   @memories.md に追記候補を出してください。
   ```

2. AIが提案する知見をレビュー
3. 適切な内容をメモリーズに追記

### メモリーズの参照

特定のトピックに関する知見を確認したい場合：
```
[トピック]に関する既存の知見を @memories.md から確認してください。
```

<a id="運用ベストプラクティス"></a>
## 7. 運用ベストプラクティス

### 効果的なタグ付け

メモリーズのエントリには、検索しやすいように適切なタグを付けましょう：
- `#architecture` - アーキテクチャ設計
- `#bugfix` - バグ修正の知見
- `#pattern` - よく使うコードパターン
- `#performance` - パフォーマンス最適化
- `#security` - セキュリティ関連

### ファイルサイズ管理

メモリーズが大きくなりすぎる場合（目安：1000行以上）：
- 時期やカテゴリでファイルを分割
- インデックスファイルを作成して管理
- 古いメモリーズをアーカイブしつつ参照可能に保つ

### 継続的な改善

- 定期的（1-2ヶ月ごと）にプロセスを振り返り、調整する
- タグ体系や記録フォーマットを必要に応じて見直す
- チームからのフィードバックを積極的に取り入れる

<a id="よくある質問"></a>
## 8. よくある質問

### Q: このシステムは小規模プロジェクトでも役立ちますか？
**A**: 小規模プロジェクトでも導入できますが、特に大規模・長期プロジェクトで効果を発揮します。小規模チームでは簡略化したバージョンからスタートするのがおすすめです。

### Q: AIがメモリーズの内容を無視することがありますか？
**A**: 時々あります。その場合は「@memories.md の内容を考慮して」と明示的に指示したり、特に重要な情報を直接プロンプトに含めたりすると改善します。

### Q: チーム全員がCursorを使っていない場合は？
**A**: Scratchpad + Memoriesの内容はGitで共有できるため、一部のメンバーがCursorを使用していなくても、ドキュメントとして参照することは可能です。ただし、効果を最大化するにはチーム全体でCursorを採用することをお勧めします。

<a id="参考資料"></a>
## 9. 参考資料

- [Cursor と振り返りをして自走力を高める](https://zenn.dev/globis/articles/cursor-scratchpad-memories) - Zenn記事
- [Rules for ultra context, memories, lessons, scratchpad](https://forum.cursor.com/t/rules-for-ultra-context-memories-lessons-scratchpad-with-plan-and-act-modes/48792) - Cursor公式フォーラム
- [Cursor公式ドキュメント](https://cursor.sh/docs/welcome) 